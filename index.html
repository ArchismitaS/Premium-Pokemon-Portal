<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Premium Pokémon Portal</title>
    <style>
      :root {
        --accent: #0071e3;
        --accent-soft: rgba(0, 113, 227, 0.14);
        --bg: #f5f5f7;
        --surface: rgba(255, 255, 255, 0.82);
        --surface-strong: #ffffff;
        --text-primary: #1d1d1f;
        --text-secondary: #6e6e73;
        --stroke: rgba(0, 0, 0, 0.08);
        --radius-xl: 28px;
        --radius-lg: 20px;
        --radius-md: 14px;
        --shadow-card: 0 20px 40px rgba(0, 0, 0, 0.08);
        --transition: 300ms cubic-bezier(0.22, 1, 0.36, 1);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif;
        color: var(--text-primary);
        background: #ffffff;
      }

      .app-shell {
        width: min(980px, 92vw);
        margin: 0 auto;
        padding: 72px 0 64px;
      }

      .hero {
        text-align: center;
        margin-bottom: 32px;
      }

      .eyebrow {
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-size: 12px;
        color: var(--text-secondary);
        margin-bottom: 12px;
      }

      h1 {
        margin: 0;
        font-weight: 650;
        font-size: clamp(2rem, 4.2vw, 3.6rem);
      }

      .subtitle {
        margin: 12px auto 0;
        max-width: 620px;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .search-wrap {
        margin: 30px auto 16px;
        display: flex;
        align-items: center;
        background: var(--surface);
        border: 1px solid var(--stroke);
        border-radius: 18px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.04);
        padding: 14px;
        backdrop-filter: blur(10px);
        width: 100%;
      }

      .search-wrap input {
        border: 0;
        background: transparent;
        color: var(--text-primary);
        width: 100%;
        font-size: 19px;
        padding: 16px;
        outline: none;
      }

      .search-wrap button {
        border: 0;
        border-radius: 14px;
        padding: 15px 22px;
        font-weight: 600;
        cursor: pointer;
        transition: transform var(--transition), opacity var(--transition);
      }

      .search-btn {
        background: var(--accent);
        color: white;
        box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.1);
      }

      .search-btn:hover,
      .toggle-btn:hover {
        transform: translateY(-1px);
        opacity: 0.95;
      }

      .notice {
        width: 100%;
        margin: 0 auto;
        min-height: 32px;
        border-radius: var(--radius-md);
        padding: 10px 12px;
        font-size: 14px;
        color: var(--text-secondary);
      }

      .notice.error {
        background: rgba(255, 59, 48, 0.08);
        color: #c03229;
        border: 1px solid rgba(255, 59, 48, 0.18);
      }

      .notice.info {
        background: rgba(0, 113, 227, 0.09);
        border: 1px solid rgba(0, 113, 227, 0.2);
      }

      .result-stage {
        margin-top: 14px;
      }

      .card {
        background: var(--surface-strong);
        border-radius: var(--radius-xl);
        border: 1px solid rgba(255, 255, 255, 0.65);
        box-shadow: var(--shadow-card);
        padding: clamp(22px, 3.2vw, 36px);
        display: grid;
        grid-template-columns: minmax(220px, 320px) 1fr;
        gap: 28px;
        transform: translateY(10px);
        opacity: 0;
        transition: transform var(--transition), opacity var(--transition);
      }

      .card.visible {
        transform: translateY(0);
        opacity: 1;
      }

      .media-panel {
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(246, 246, 248, 0.9));
        border-radius: var(--radius-lg);
        border: 1px solid rgba(0, 0, 0, 0.04);
        padding: 18px;
        text-align: center;
      }

      .pokemon-art {
        width: min(100%, 260px);
        aspect-ratio: 1 / 1;
        object-fit: contain;
        filter: drop-shadow(0 12px 20px rgba(0, 0, 0, 0.12));
        transition: transform var(--transition);
      }

      .pokemon-art:hover {
        transform: translateY(-4px) scale(1.015);
      }

      .meta {
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-size: 12px;
        margin-top: 8px;
      }

      .name-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
      }

      .pokemon-name {
        font-size: clamp(1.8rem, 4vw, 2.5rem);
        margin: 0;
        line-height: 1.1;
      }

      .type-pill {
        border-radius: 999px;
        padding: 7px 12px;
        background: var(--accent-soft);
        color: var(--accent);
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.05em;
        text-transform: uppercase;
      }

      .type-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .actions {
        margin-top: 14px;
      }

      .toggle-btn {
        background: rgba(0, 0, 0, 0.06);
        color: var(--text-primary);
      }

      .stats {
        margin-top: 24px;
        display: grid;
        gap: 12px;
      }

      .stat {
        display: grid;
        grid-template-columns: 82px 1fr 38px;
        align-items: center;
        gap: 10px;
      }

      .stat-label {
        font-size: 12px;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.06em;
      }

      .bar {
        height: 9px;
        border-radius: 999px;
        background: rgba(0, 0, 0, 0.08);
        overflow: hidden;
      }

      .fill {
        height: 100%;
        width: 0;
        border-radius: inherit;
        background: linear-gradient(90deg, var(--accent), color-mix(in srgb, var(--accent), white 25%));
        transition: width 900ms cubic-bezier(0.16, 1, 0.3, 1);
      }

      .stat-value {
        text-align: right;
        font-size: 13px;
        color: var(--text-secondary);
      }

      .skeleton {
        display: none;
        background: var(--surface-strong);
        border-radius: var(--radius-xl);
        padding: 30px;
        box-shadow: var(--shadow-card);
      }

      .skeleton.active {
        display: block;
      }

      .skeleton-line,
      .skeleton-block {
        position: relative;
        overflow: hidden;
        background: #ececef;
        border-radius: 12px;
      }

      .skeleton-line::after,
      .skeleton-block::after {
        content: "";
        position: absolute;
        inset: 0;
        transform: translateX(-100%);
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.75), transparent);
        animation: shimmer 1.1s infinite;
      }

      .skeleton-grid {
        display: grid;
        grid-template-columns: minmax(220px, 320px) 1fr;
        gap: 24px;
      }

      .skeleton-block {
        min-height: 280px;
      }

      .skeleton-line {
        height: 16px;
        margin-bottom: 14px;
      }

      @keyframes shimmer {
        to {
          transform: translateX(100%);
        }
      }

      @media (max-width: 760px) {
        .card,
        .skeleton-grid {
          grid-template-columns: 1fr;
        }

        .app-shell {
          padding-top: 48px;
        }
      }
    </style>
  </head>
  <body>
    <main class="app-shell">
      <header class="hero">
        <div class="eyebrow">Premium Pokédex</div>
        <h1>Pokémon, refined.</h1>
        <p class="subtitle">
          Search any Pokémon by name or Pokédex ID and explore a polished, Apple-inspired product card
          with dynamic type theming and interactive stats.
        </p>
        <div class="search-wrap" role="search">
          <input id="searchInput" type="text" placeholder="Search Pokémon by name or ID" aria-label="Search Pokémon" />
          <button id="searchBtn" class="search-btn">Search</button>
        </div>
        <div id="notice" class="notice" aria-live="polite"></div>
      </header>

      <section class="result-stage">
        <div id="skeleton" class="skeleton" aria-hidden="true">
          <div class="skeleton-grid">
            <div class="skeleton-block"></div>
            <div>
              <div class="skeleton-line" style="width: 58%; height: 34px;"></div>
              <div class="skeleton-line" style="width: 42%;"></div>
              <div class="skeleton-line" style="width: 100%;"></div>
              <div class="skeleton-line" style="width: 100%;"></div>
              <div class="skeleton-line" style="width: 85%;"></div>
            </div>
          </div>
        </div>
        <article id="pokemonCard" class="card" hidden></article>
      </section>
    </main>

    <script>
      const state = { pokemon: null, shiny: false };

      const searchInput = document.getElementById('searchInput');
      const searchBtn = document.getElementById('searchBtn');
      const card = document.getElementById('pokemonCard');
      const skeleton = document.getElementById('skeleton');
      const notice = document.getElementById('notice');

      const typeColors = {
        fire: '#ff6b6b',
        water: '#4dabf7',
        grass: '#51cf66',
        electric: '#ffd43b',
        psychic: '#f783ac',
        ice: '#74c0fc',
        dragon: '#9775fa',
        dark: '#495057',
        fairy: '#faa2c1',
        fighting: '#ff922b',
        poison: '#da77f2',
        ground: '#d9480f',
        rock: '#868e96',
        bug: '#82c91e',
        ghost: '#7950f2',
        steel: '#adb5bd',
        flying: '#74c0fc',
        normal: '#ced4da'
      };

      const STAT_ALIASES = {
        hp: 'HP',
        attack: 'ATK',
        defense: 'DEF',
        'special-attack': 'SP.ATK',
        'special-defense': 'SP.DEF',
        speed: 'SPD'
      };

      searchBtn.addEventListener('click', () => fetchPokemon());
      searchInput.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') fetchPokemon();
      });

      function setNotice(message = '', type = 'info') {
        notice.textContent = message;
        notice.className = 'notice';
        if (message) notice.classList.add(type);
      }

      function setLoading(loading) {
        skeleton.classList.toggle('active', loading);
        skeleton.setAttribute('aria-hidden', loading ? 'false' : 'true');
      }

      function updateTheme(primaryType) {
        const color = typeColors[primaryType] || '#0071e3';
        document.documentElement.style.setProperty('--accent', color);
        document.documentElement.style.setProperty('--accent-soft', `${hexToRgba(color, 0.15)}`);
      }

      function hexToRgba(hex, alpha) {
        const safeHex = hex.replace('#', '');
        const bigint = parseInt(safeHex.length === 3
          ? safeHex.split('').map((x) => x + x).join('')
          : safeHex, 16);

        const r = (bigint >> 16) & 255;
        const g = (bigint >> 8) & 255;
        const b = bigint & 255;
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
      }

      function capitalize(text) {
        return text.charAt(0).toUpperCase() + text.slice(1);
      }

      function normalizeQuery(input) {
        return input.trim().toLowerCase();
      }

      async function fetchPokemon() {
        const query = normalizeQuery(searchInput.value);
        if (!query) {
          setNotice('Type a Pokémon name or ID to start.', 'info');
          return;
        }

        setLoading(true);
        setNotice('');
        card.hidden = true;
        card.classList.remove('visible');

        try {
          const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${encodeURIComponent(query)}`);

          if (!response.ok) {
            if (response.status === 404) {
              throw new Error('not-found');
            }
            throw new Error('api-error');
          }

          const data = await response.json();
          state.pokemon = data;
          state.shiny = false;

          updateTheme(data.types[0]?.type.name);
          renderPokemon(data);
          setNotice(`Showing results for ${capitalize(data.name)}.`, 'info');
        } catch (error) {
          console.error('fetchPokemon error:', error);
          if (error && error.message === 'not-found') {
            setNotice('No Pokémon matched your search. Try another name or Pokédex ID.', 'error');
          } else {
            const msg = (error && (error.message || String(error))) || 'Unknown error';
            setNotice(`Error fetching Pokémon: ${msg}`, 'error');
          }
        } finally {
          setLoading(false);
        }
      }

      function getArtwork(data, shiny = false) {
        const official = data.sprites.other['official-artwork'];
        const fallback = data.sprites;

        if (shiny) {
          return official.front_shiny || fallback.front_shiny || official.front_default || fallback.front_default;
        }

        return official.front_default || fallback.front_default || '';
      }

      function renderPokemon(data) {
        const types = data.types.map((entry) => entry.type.name);

        card.innerHTML = `
          <div class="media-panel">
            <img id="pokemonArt" class="pokemon-art" src="${getArtwork(data)}" alt="${capitalize(data.name)} artwork" />
            <div class="meta">Pokédex #${String(data.id).padStart(4, '0')}</div>
          </div>
          <div>
            <div class="name-row">
              <h2 class="pokemon-name">${capitalize(data.name)}</h2>
              <div class="type-pill">${types[0]}</div>
            </div>
            <div class="type-row">
              ${types.map((type) => `<span class="type-pill">${type}</span>`).join('')}
            </div>
            <div class="actions">
              <button id="shinyToggle" class="toggle-btn">Enable Shiny</button>
            </div>
            <div class="stats">
              ${data.stats
                .map((stat) => {
                  const value = stat.base_stat;
                  const width = Math.min((value / 180) * 100, 100).toFixed(1);
                  return `
                    <div class="stat">
                      <span class="stat-label">${STAT_ALIASES[stat.stat.name] || stat.stat.name}</span>
                      <div class="bar"><div class="fill" style="width: ${width}%"></div></div>
                      <span class="stat-value">${value}</span>
                    </div>
                  `;
                })
                .join('')}
            </div>
          </div>
        `;

        card.hidden = false;
        requestAnimationFrame(() => card.classList.add('visible'));

        const shinyBtn = document.getElementById('shinyToggle');
        shinyBtn.addEventListener('click', toggleShiny);
      }

      function toggleShiny() {
        if (!state.pokemon) return;
        state.shiny = !state.shiny;

        const art = document.getElementById('pokemonArt');
        const btn = document.getElementById('shinyToggle');

        art.src = getArtwork(state.pokemon, state.shiny);
        btn.textContent = state.shiny ? 'Disable Shiny' : 'Enable Shiny';
      }

      searchInput.value = 'mewtwo';
      fetchPokemon();
    </script>
  </body>
</html>
